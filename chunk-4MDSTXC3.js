import{e as I,r as A}from"./chunk-B3MYQGNG.js";import{Kb as k,ca as v}from"./chunk-OCB7GNST.js";import{$d as m,Dd as p,Ed as g,Kd as s,Od as S,Zd as d,f as W,g as y,me as l,pe as h}from"./chunk-SEIBAFIN.js";var b=W(S(),1);function P(e){function a(o){return!(o.ownVisible&&!d)}e=e.filter(a);for(let o=0;o<e.length;o++){let t=e[o];Array.isArray(t.nav)&&(t.nav=t.nav.filter(a),P(t.nav))}return e}function F(){return y(this,null,function*(){if(m)return;function e(t){t.forEach(r=>{l.push(r)}),v.emit("WEB_FINISH"),window.__FINISHED__=!0}let a=P(l);if(l.splice(0,l.length),!d)return e(a);if(window.localStorage.getItem(s.s_url)!==p.datetime){let t=[s.token,s.isDark,s.authCode,s.location],r=window.localStorage.length;for(let n=0;n<r;n++){let i=window.localStorage.key(n);t.includes(i)||window.localStorage.removeItem(i)}window.localStorage.setItem(s.s_url,p.datetime),b.default.removeItem(s.website),e(a),d&&setTimeout(()=>{v.emit("NOTIFICATION",{type:"success",title:h("_buildSuccess"),content:p.datetime,config:{nzDuration:0}})},1e3);return}try{let t=(yield b.default.getItem(s.website))||a;e(t)}catch{e(a)}})}function u(e){return e=e||l,m?k({content:JSON.stringify(e),path:g}):b.default.setItem(s.website,e)}function T(e){e||=l;let{id:a}=I(),{oneIndex:o,twoIndex:t}=A(a),r=!e[o].nav[t].collapsed;return e[o].nav[t].collapsed=r,e[o].nav[t].nav.map(n=>(n.collapsed=r,n)),m||u(e),r}function H(e,a=!1){return y(this,null,function*(){let o=!1;function t(r){for(let n=0;n<r.length;n++){let i=r[n];Array.isArray(i.nav)&&(i.nav=i.nav.filter(f=>f.name&&e.includes(a?f.rId:f.id)?(o=!0,!1):!0),t(i.nav))}}if(t(l),o){yield u(l);let{q:r}=I();r&&!m&&v.emit("WEB_REFRESH")}return o})}function R(e,a){let o=Object.keys(a),t=!1;function r(n){for(let i=0;i<n.length;i++){let f=n[i];if(f.name&&f.id===e){t=!0;for(let c of o)f[c]=a[c]}Array.isArray(f.nav)&&r(f.nav)}}return r(l),u(l),t}function j(e){let a=null;function o(t){for(let r=0;r<t.length;r++){let n=t[r];if(n.name&&n.id===e){a=n;break}Array.isArray(n.nav)&&o(n.nav)}}return o(l),a}function q(e,a){let o=Object.keys(a),t=!1;function r(n){for(let i=0;i<n.length;i++){let f=n[i];if(f.title&&f.id===e){t=!0;for(let c of o)f[c]=a[c]}Array.isArray(f.nav)&&!f.nav[0]?.name&&r(f.nav)}}return r(l),u(l),t}function z(e,a=!1){return y(this,null,function*(){let o=!1;function t(r){for(let n=0;n<r.length;n++){let i=r[n];if(Array.isArray(i.nav)){if(t(i.nav),i.nav[0]?.name)break;i.nav=i.nav.filter(f=>f.title&&e.includes(a?f.rId:f.id)?(o=!0,!1):!0)}}}return e.forEach(r=>{l.forEach((n,i)=>{n.id===r&&(o=!0,l.splice(i,1))})}),t(l),o&&(yield u(l)),o})}function G(e,a){let o=!1;function t(r){for(let n=0;n<r.length;n++){let i=r[n];i.title&&i.id===e&&(o=!0,i.nav.unshift(a)),Array.isArray(i.nav)&&t(i.nav)}}return t(l),u(l),o}export{F as a,u as b,T as c,H as d,R as e,j as f,q as g,z as h,G as i};
